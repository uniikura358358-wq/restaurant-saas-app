# P07_環境変数・セキュリティ構造.md

## 概要

セキュリティを保持しつつ、再現性を確保するための環境変数テンプレート。

## .env.local 構造 (Firebase)

- `NEXT_PUBLIC_FIREBASE_API_KEY`: (API Key from Firebase SDK setup)
- `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`: (e.g., project-id.firebaseapp.com)
- `NEXT_PUBLIC_FIREBASE_PROJECT_ID`: (Your Firebase Project ID)
- `FIREBASE_SERVICE_ACCOUNT_KEY`: (JSON string containing private_key, client_email etc. for Admin SDK)

## .env.local 構造 (AI & Backend)

- `GOOGLE_API_KEY`: (Google AI Studio Gemini API Key)
- `WHOP_WEBHOOK_SECRET`: (Webhook secret from Whop Dashboard)
- `STRIPE_SECRET_KEY`: (Stripe Secret Key from Dashboard)
- `STRIPE_WEBHOOK_SECRET`: (Stripe Webhook Secret)

## 注意事項

- 本番環境では `.env` ファイルをサーバーに直接配置せず、Vercel 等の管理画面から設定すること。
- `FIREBASE_SERVICE_ACCOUNT_KEY` はエスケープされたJSON文字列として設定すること。

## 次に実装すべき最小単位のタスク

商用デプロイ時専用のシークレットマネージャー(GSM等)移行計画の策定。
