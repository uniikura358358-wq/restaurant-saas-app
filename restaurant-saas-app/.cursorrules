🛡️ AI 開発・エンジニアリング命令規則 (Standard Operating Procedure)
1. 開発プロセス管理 (Development Lifecycle)
「実行前に計画、実行後に報告」を徹底し、ブラックボックス化を排除する。

1. 思考と実行の分離（ドキュメント駆動開発）:

[PLAN] 作業開始前: 修正対象ファイル、依存関係、想定リスクを提示し、承認を得ること。

[PROGRESS] 作業中: 3ファイル以上の修正時は 現在の工程 [x/y] を常に表示し、文脈を維持すること。

[DONE] 作業終了後: 実施内容、動作確認結果、残件（TODO）を完了報告書として出力すること。

2. タスクリストの動的更新 (Task Tracker):

90_ログ・日報/Task_Tracker.md をルートディレクトリに維持・管理する [cite: 2026-02-12]。

自動更新: 毎回答の末尾に、最新の進捗状況（完了・進行中・未着手）をタスクリスト形式で表示すること。

依存関係の明示: 前提条件が必要なタスク（例：認証未実装での決済機能不可）は注釈すること。

3. 継続的ログ (Progress Log):

セッションログ: 作業セッション毎の技術的決定事項（選定理由、設定内容等）を簡潔に記録する [cite: 2026-02-12]。

反証準拠: 完了報告には必ず「反証5つの対策」への準拠状況を含めること [cite: 2026-02-12]。

2. 基本スタンス (Communication & Ethics)
言語 & 形式:

全てのドキュメント、コードコメント、報告は「日本語 (UTF-8)」で記述し、文字化けや絵文字ノイズを排除すること。

論理・事実主義:

仕様書優先: 10_進行中プロジェクト の最新仕様を常に正（ソースオブトゥルース）とすること。

冷徹な事実確認: 証拠（ログ/URL）があるもののみを「事実」とし、不明な点は「不明」と記述すること。

最新性の追求: 日本で利用可能な最新AIサービスを常にリサーチし、有効な代替案を積極的に提案すること。

3. 技術スタック・性能要件 (Tech Stack & Performance)
Next.js 15/16 (App Router):

Server Components をデフォルトとし、Client Components は最小化すること。

非同期API（cookies(), headers() 等）は必ず await 処理を行うこと。

パフォーマンス & 品質:

next/image による画像最適化の徹底。

TypeScript の any 使用を厳禁とし、Type Safety を担保すること。

DRY原則を遵守し、不要なライブラリ導入によるコードの肥大化を防ぐこと。

4. セキュリティ・ビジネスロジック (Security & Business Logic)
認証・データ保護:

Supabase (PKCE Flow) による安全な認証と、RLS（auth.uid() = user_id）によるデータ隔離。

環境管理:

秘密情報は .env.local で管理し、ハードコーディングを禁止する。

ローカルと本番（eos-gp.com）のパス切り替えを動的かつ安全に行うこと。

機能制限 (Feature Gating):

契約プラン（単品/セット/年払）に基づくUI・機能制限を Server Actions レベルで遮断すること。

SMSクォータ管理:

送信前に store_usage テーブルを参照し、プラン上限のバリデーションをアトミックに実行すること。

5. 運用・出力ルール (Operations & Output)
フォルダ構成: Obsidian 管理ルール（00~99）を厳守すること [cite: 2026-02-12]。

画像生成: 1回最大4枚まで。/public/images/ に物理保存し、パスを表示すること。

UI要件: トースト通知は sonner (top-center, richColors) を使用すること。

許可制: コード作成、画像生成の実行前には必ずユーザーの許可を得ること。

リスク管理: 全回答の末尾に、必ず「反証5つの対策方法」を提示すること。