# P02_Instagram半自動投稿_v1.md（マニュアル方式）

## 概要

Meta社の厳格な「アプリ審査（App Review）」および「ビジネス認証」には数週間の時間と膨大な書類（法人登記簿等）が必要になるため、これらを回避し即時リリース可能な状態にする方針を決定しました。
方針として**公式APIによる直接投稿は一切行わず**、「システムが素材（画像・文面）を提供し、ユーザーが手動で貼り付ける」マニュアル方式を貫徹します。

## ロジック・ワークフロー

1. **コンテンツ生成**:
   - 店舗情報や最新イベントに基づき、AI（Gemini）が最適なキャプションとハッシュタグを生成。
   - `gemini-2.5-flash-image`（ナノバナナ）により、投稿用の高品質な料理画像を生成。
2. **素材準備**:
   - 生成された画像を Firebase Storage にアップロードし、永続的なURLを発行。
   - バックエンドAPI（`/api/instagram/post`）を呼び出し、DBに「投稿意図（manual_intent）」をログとして記録。
3. **ユーザーアクション（自動支援）**:
   - ユーザーが「画像保存＆キャプションをコピー」ボタンを押下。
   - **自動クリップボードコピー**: `navigator.clipboard.writeText` によりキャプションを即座にコピー。
   - **ガイダンス**: トースト通知で「画像を保存してInstagramに貼り付けてください」と指示。
   - **外部遷移**: 別タブで `instagram.com` を自動的に開く。
4. **投稿完了**:
   - ユーザーが Instagram 上で自身の端末から画像をアップロードし、コピー済みのキャプションを貼り付けて「シェア」する。

## メリット

- **即時リリース可能**: Meta社の審査待ち（数週間〜1ヶ月）をゼロに。
- **アカウント凍結リスクの排除**: 公式APIの仕様変更やスパム判定アルゴリズムに左右されず、安全に投稿が可能。
- **運用の簡便化**: 複雑なFacebookログイン連携や、有効期限の短いアクセストークンの管理が不要。

## 次のステップ

- ストーリー投稿用のアスペクト比（9:16）への画像生成プロンプト最適化。
- 投稿済み内容の履歴管理画面の構築（マニュアル投稿完了のチェック機能）。
